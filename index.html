<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamiento de Mensajes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .brigada-container {
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #000;
            padding: 10px;
            text-align: left;
        }
        button {
            padding: 5px 10px;
            margin: 2px;
            cursor: pointer;
        }
        .brigada-1 { background-color: #f0f8ff; }
        .brigada-2 { background-color: #ffe4e1; }
        .brigada-3 { background-color: #fafad2; }
        .brigada-4 { background-color: #e6e6fa; }
        @media (max-width: 600px) {
            table {
                font-size: 12px;
            }
            th, td {
                padding: 5px;
            }
        }
    </style>
</head>
<body>

<h1>Sistema de Agendamiento de Mensajes</h1>

<div id="brigada-container" class="brigada-container">
    <!-- Aquí se agregarán las brigadas dinámicamente -->
</div>

<button onclick="agregarBrigada()">Agregar Brigada</button>
<button onclick="limpiarTabla()">Limpiar Todo</button>

<script>
    let brigadaCount = 0;

    function agregarBrigada() {
        brigadaCount++;
        const container = document.getElementById('brigada-container');

        const brigadaDiv = document.createElement('div');
        brigadaDiv.className = `brigada-${brigadaCount % 4 + 1}`;

        const brigadaInput = document.createElement('input');
        brigadaInput.type = 'text';
        brigadaInput.placeholder = `Nombre de la Brigada ${brigadaCount}`;
        brigadaInput.setAttribute('aria-label', `Nombre de la Brigada ${brigadaCount}`);

        const table = document.createElement('table');
        table.id = `brigada-${brigadaCount}`;
        table.innerHTML = `
            <thead>
                <tr>
                    <th>Brigada</th>
                    <th>Ticket</th>
                    <th>Teléfono</th>
                    <th>Hora</th>
                    <th>Mensaje Personalizado 1</th>
                    <th>Mensaje Personalizado 2</th>
                    <th>Mensaje Personalizado 3</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        `;

        const addRowButton = document.createElement('button');
        addRowButton.innerText = 'Agregar Ticket';
        addRowButton.setAttribute('role', 'button');
        addRowButton.onclick = function() {
            agregarFila(table.id, brigadaInput);
        };

        brigadaDiv.appendChild(brigadaInput);
        brigadaDiv.appendChild(table);
        brigadaDiv.appendChild(addRowButton);
        container.appendChild(brigadaDiv);
    }

    function agregarFila(tableId, brigadaInput) {
        const table = document.getElementById(tableId).getElementsByTagName('tbody')[0];
        const newRow = table.insertRow();

        newRow.innerHTML = `
            <td>${brigadaInput.value}</td>
            <td><input type="text" placeholder="Ticket" aria-label="Ticket"></td>
            <td><input type="text" placeholder="Teléfono" aria-label="Teléfono"></td>
            <td><input type="time" placeholder="Hora" aria-label="Hora"></td>
            <td><input type="text" placeholder="Mensaje 1" disabled aria-label="Mensaje 1"></td>
            <td><input type="text" placeholder="Mensaje 2" aria-label="Mensaje 2"></td>
            <td><input type="text" placeholder="Mensaje 3" aria-label="Mensaje 3"></td>
            <td>
                <button onclick="enviarMensaje(this, 1)">Enviar Mensaje 1</button>
                <button onclick="enviarMensaje(this, 2)">Enviar Mensaje 2</button>
                <button onclick="enviarMensaje(this, 3)">Enviar Mensaje 3</button>
                <button onclick="eliminarFila(this)">Eliminar</button>
            </td>
        `;
    }

    function enviarMensaje(button, tipoMensaje) {
        const row = button.closest('tr');
        const telefono = row.cells[2].getElementsByTagName('input')[0].value;
        const mensajes = [
            row.cells[4].getElementsByTagName('input')[0].value,
            row.cells[5].getElementsByTagName('input')[0].value || `Mensaje de confirmación de la brigada.`,
            row.cells[6].getElementsByTagName('input')[0].value || 'Mensaje personalizado 3 no especificado.'
        ];
        const mensaje = mensajes[tipoMensaje - 1];
        const url = `https://api.whatsapp.com/send?phone=${telefono}&text=${encodeURIComponent(mensaje)}`;
        window.open(url, '_blank');
    }

    function eliminarFila(button) {
        const row = button.closest('tr');
        row.parentNode.removeChild(row);
    }

    function limpiarTabla() {
        const container = document.getElementById('brigada-container');
        container.innerHTML = '';
        brigadaCount = 0;
    }
</script>

</body>
</html>
